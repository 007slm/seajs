define("seajs/plugin-combo",[],function(){function n(a){var c=[],b=g.comboExcludes;f.forEach(a,function(d){var e=o[d];if(e=!e||e.status<p.LOADING)if(e=!b||!b.test(d))var a=g.comboSyntax||["??",","],e=a[0],a=a[1],e=!(e&&0<d.indexOf(e)||a&&0<d.indexOf(a));e&&c.push(d)});1<c.length&&k(l(c))}function l(a){return q(r(a))}function r(a){var c={__KEYS:[]};f.forEach(a,function(b){var b=b.replace("://","__").split("/"),a=c;f.forEach(b,function(b){a[b]||(a[b]={__KEYS:[]},a.__KEYS.push(b));a=a[b]})});return c}
function q(a){var c=[];f.forEach(a.__KEYS,function(b){for(var d=b,b=a[b],e=b.__KEYS;1===e.length;)d+="/"+e[0],b=b[e[0]],e=b.__KEYS;e.length&&c.push([d.replace("__","://"),m(b)])});return c}function m(a){var c=[];f.forEach(a.__KEYS,function(b){var d=m(a[b]);d.length?f.forEach(d,function(a){c.push(b+"/"+a)}):c.push(b)});return c}function k(a){var c=g.comboSyntax||["??",","];f.forEach(a,function(b){var a=b[0]+"/",b=s(b[1]);f.forEach(b,function(b){var h=a+c[0]+b.join(c[1]);if(2E3<h.length)throw Error("The combo url is too long: "+
h);f.forEach(b,function(b){i[a+b]=h})})})}function s(a){var c=[],b={};f.forEach(a,function(a){var c;c=a.lastIndexOf(".");(c=0<=c?a.substring(c):"")&&(b[c]||(b[c]=[])).push(a)});for(var d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c}var j=seajs.pluginSDK,p=j.Module.STATUS,f=j.util,g=j.config,i={},o=seajs.cache;seajs.debug?seajs.log("Combo is turned off in debug mode"):(seajs.on("load",function(a){n(a)}),seajs.on("fetch",function(a){var c=a.uri;a.uri=i[c]||c}));f.toComboPaths=l;f.toComboHash=k;f.comboHash=
i});seajs.use("seajs/plugin-combo");
