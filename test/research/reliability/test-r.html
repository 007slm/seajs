<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>test-r</title>
</head>
<body>
<div id="o"></div>

<script>var scriptsNum = 0;</script>

<!-- for testing cache -->
<script src="c.js"></script>
<script src="d.js"></script>
<script src="f.js"></script>

<script src="util.js"></script>
<script src="require.js"></script>

<script>
(function() {
  if (scriptsNum !== 4 || typeof define === 'undefined') return;
  complete('r-init');

  window.onerror = function() {
    complete('r-error');
  };

  require.onError = function() {
    complete('r-______');
  };


  // test
  require(['a.js', 'b.js', 'c.js', 'd.js', 'e.js', 'f.js'], function() {
    var s = '';

    for (var i = 0; i < arguments.length; i++) {
      s += (arguments[i] || 0).name ? arguments[i].name : '_';
    }

    complete('r-' + s);
  });

  // 注：
  // 假设 b.js 请求时 404 了，RequireJS 里：
  //  1. 在 IE 浏览器下会走正常回调，只是 b 为 null，因此结果为 r-1-a_cd
  //  2. 在非 IE 浏览器下，会走 timeout 流程触发 onError, 结果为 r-1-____
  // 在 SeaJS 里，都是走正常回调。
})();
</script>
</body>
</html>