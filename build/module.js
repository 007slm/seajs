/*
Copyright 2011, SeaJS v0.9.0dev
MIT Licensed
build time: ${build.time}
*/

var module=module||{};module.seajs="0.9.0dev";
(function(t){function D(a){for(var c=[],b=0,d=a.length,f;b<d;b++){f=a[b];n[f]||c.push(f)}return c}function w(a,c){if(o.call(a)==="[object String]")a=[a];for(var b=0,d=a.length;b<d;b++)a[b]=a[b].replace(".js","");E.call(this,a,function(f){for(var e=[],g,h=0,j=a.length;h<j;h++){try{g=f(a[h])}catch(p){g=null}if(c){if(F(g))e=e.concat(g);else e.push(g);c.apply(t,e)}}});return this}function E(a,c,b){function d(){if(c)c(b?undefined:G.call(e,{deps:g}))}function f(u){var l;if(e!==t)l=e.uri;return x(u,l)}var e=
this,g=f(a);a=D(g);if(a.length===0)return d();for(var h=0,j=a.length,p=j;h<j;h++)(function(u){N(u,function(){var l=(n[u]||0).dependencies||[],y=l.length;if(y){l=D(f(l));p+=y;E(l,function(){p-=y;p===0&&d()},true)}--p===0&&d()})})(a[h])}function N(a,c){function b(){var d=q.length,f=0,e,g=a,h,j=a.indexOf("-pkg")!==-1;if(d){for(;f<d;f++){h=q[f];e=h.id;delete h.id;if(e&&j)g=H(e,a);e=g;h.dependencies=x(h.dependencies,e);n[e]=h}q=[]}r[a]&&delete r[a];c&&c()}if(r[a])z(r[a],b);else{if(A)s={uri:a,timestamp:I()};
r[a]=O(a+".js"+(J[a]||""),b)}}function O(a,c){var b=document.createElement("script");z(b,function(){c&&c.call(b);try{if(b.clearAttributes)b.clearAttributes();else for(var d in b)delete b[d]}catch(f){}v.removeChild(b)});b.async=true;b.src=a;return v.insertBefore(b,v.firstChild)}function z(a,c){a.addEventListener("load",c,false);a.addEventListener("error",function(){c()},false)}function P(){if(B&&B.readyState==="interactive")return B;for(var a=v.getElementsByTagName("script"),c,b=0,d=a.length;b<d;b++){c=
a[b];if(c.readyState==="interactive")return c}return null}function G(a){function c(b){var d=C(b,a.uri),f,e=a.deps;f=[];for(var g,h=0;g=e[h++];)if(m[g])f=f.concat(m[g]);else f.push(g);var j;if(e=m[d]){j=[];d=0;for(b=e.length;d<b;d++)j[d]=c(e[d]);return j}if(Q(f,d)===-1||!(j=n[d]))throw"Invalid module: "+b;if(K(a,d))return j.exports;if(!j.exports){b=j;d={uri:d,deps:j.dependencies,parent:a};e=b.factory;delete b.factory;b.uri=d.uri;b.exports={};b.load=w;if(o.call(e)==="[object Function]"){if(d=e(G(d),
b.exports,b))b.exports=d}else b.exports=e||{}}return j.exports}if(this!==t)a.uri=this.uri;return c}function K(a,c){if(a.uri===c)return true;if(a.parent)return K(a.parent,c);return false}function H(a,c){var b=C("./"+a,c);m[c]=m[c]||[];m[c].push(b);return b}function L(a){a=("./"+a).replace(/(.*)?\/.*/,"$1").substring(2);return(a?a:".")+"/"}function C(a,c){var b,d=a;if(b=k.prefix){var f=d.indexOf("{"),e=d.indexOf("}");if(f===0&&e>1){f=d.substring(1,e);if(b.hasOwnProperty(f))d=b[f]+d.substring(e+1)}}a=
d;if(a.indexOf("://")!==-1)d=a;else if(a.indexOf("./")===0||a.indexOf("../")===0){d=L(c||M)+a;b=d.split("/");e=[];var g,h;g=0;for(h=b.length;g<h;g++){f=b[g];if(f==".."){if(e.length===0)throw"Invalid module path: "+d;e.pop()}else f!=="."&&e.push(f)}d=e.join("/")}else d=a.indexOf("/")===0?(c||M).replace(/^(\w+:\/\/[^/]+)\/?.*$/,"$1")+a:k.base+a;d=b=d;if(b=b.match(/^([^?]+)(\?.*)$/)){d=b[1];J[d]=b[2]}return d}function x(a,c){for(var b=[],d=0,f=a.length;d<f;d++)b[d]=C(a[d],c);return b}var o=Object.prototype.toString,
F=Array.isArray?Array.isArray:function(a){return o.call(a)==="[object Array]"},Q=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var b=0,d=a.length;b<d;b++)if(a[b]===c)return b;return-1},I=Date.now||function(){return(new Date).getTime()},r={},q=[],s=null,A=!+"\v1",n={},v=document.getElementsByTagName("head")[0];if(A)z=function(a,c){a.attachEvent("onreadystatechange",function(){var b=a.readyState;if(b==="loaded"||b==="complete")c()})};var B=null,m={},i=t.location,M=
i.protocol+"//"+i.host+i.pathname,J={},k={};i=document.getElementById("seajs");if(!i){i=document.getElementsByTagName("script");i=i[i.length-1]}if(!k.base)k.base=L(i.hasAttribute?i.src:i.getAttribute("src",4));if(!k.main)k.main=i.getAttribute("data-main");if(i=k.main){if(i.indexOf("~/")===0)i=k.base.replace(/^(\w+:\/\/[^/]+)\/?.*$/,"$1")+i.substring(1);w([i])}module.config=function(a){for(var c in a)k[c]=a[c];return this};module.declare=function(a,c,b){if(F(a)){b=c;c=a;a=""}else if(o.call(a)!=="[object String]"){b=
a;if(o.call(b)==="[object Function]"){a=b.toString();c=/\brequire\s*\(\s*['"]?([^'")]*)/g;for(var d=[],f;f=c.exec(a);)f[1]&&d.push(f[1]);c=d}a=""}b={dependencies:c||[],factory:b};var e;if(A){if(c=P())e=(c.hasAttribute?c.src:c.getAttribute("src",4)).replace(".js","");else if(s)if(I()-s.timestamp<10)e=s.uri;s=null}if(e){c=e;if(a&&e.indexOf("-pkg")!==-1)c=H(a,e);e=c;b.dependencies=x(b.dependencies,e);n[e]=b;q=[]}else{b.id=a;q.push(b)}return this};module.load=w})(this);
